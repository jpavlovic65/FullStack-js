<!DOCTYPE html>
<html lang="en">
<head>
  <base href="http://localhost:8000/admin/">
  <title>Ponuda</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="main.css">
  <link rel="icon" type="image/x-icon" href="icon.png">

  <script >
     function getToken() {
            const cookies = document.cookie.split('; ');
            const tokenCookie = cookies.find(row => row.startsWith('token='));
            return tokenCookie ? tokenCookie.split('=')[1] : null;
        }

        // Funkcija za slanje GET zahteva
        function sendGetRequest() {
            const token = getToken();
            if (token) {
                fetch('http://127.0.0.1:8000/api/messages', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                })
                .then(response => response.json())
                .then(data => console.log(data))
                .catch(error => console.error('Error:', error));
            } else {
                console.error('Token nije pronađen.');
            }
        }

        // Funkcija za slanje POST zahteva
        function sendPostRequest(data) {
            const token = getToken();
            if (token) {
                fetch('http://127.0.0.1:8000/api/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(data => console.log(data))
                .catch(error => console.error('Error:', error));
            } else {
                console.error('Token nije pronađen.');
            }
        }

        // Primer pozivanja funkcija
        // Ovo možete pozvati kada je potrebno ili na određeni događaj
      function sendPutRequestForPriceChange(carId, newPrice) {
    const token = getToken(); // Pretpostavimo da imate funkciju za dobijanje tokena
    if (token) {
        fetch(`http://127.0.0.1:8000/api/promeni-cenu/${carId}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify({ cena: newPrice })
        })
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error('Error:', error));
    } else {
        console.error('Token nije pronađen.');
    }
}



  </script>
</head>
<body>
  
<main class="container">
    <div class ="row">
  
<nav class="navbar navbar-expand-sm nav-custom navbar-dark">
    <div class="container-fluid">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link " href="index.html">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="auta.html">Ponuda</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="narudzbine.html">Narudzbine</a>
        </li>
        <li class="nav-item dropdown ">
          <button class="nav-link dropdown-toggle " data-bs-toggle="dropdown" aria-expanded="false"> 
              Ostalo    
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="modeli.html">Modeli</a></li>
            <li><a class="dropdown-item disabled" href="oprema.html">Oprema</a></li>
           
          </ul>
        </li>
      </ul>
    </div>
  </nav>
  
  
        <h1>Ponuda</h1>
        <div class="tabela">
        <table class="table table-striped">
            <thead>
              <tr>
                <th>Naziv</th>
                <th>Model</th>
                <th>Opis</th>
                <th>Cena</th>
              </tr>
            </thead>
            <tbody id="spisak">
              <!-- <tr>
                <td class="text-center">M3 CS Competition</td>
                <td class="text-center">M3</td>
                <td class="text-center">Auto u novom stanju presao 30 000km redovno odrzavam u ovlascenom servisu</td>
                <td class="text-center">112000</td>
                <td class="text-center"><button type="button" class="btn btn-color">Promena Cene</button><a href="auto.html" class="btn btn-secondary">Izmeni</a></td>
              </tr>
              <tr>
                <td class="text-center">840i Sport</td>
                <td class="text-center">Series 8</td>
                <td class="text-center">Stage 2 - 693ks, de-cat i skinut opf. Zvuk brutalan, ali ne preglasan. Moguce vracanje na fabricka podesavanja bez dodatnih troskova. Auto je i dalje u garanciji, servis je besplatan.</td>
                <td class="text-center">150000</td>
                <td class="text-center"><button type="button" class="btn btn-color">Promena Cene</button><a href="auto.html?id=1" class="btn btn-secondary">Izmeni</a></td>
              </tr>
              <tr>
                <td class="text-center">520 Executive</td>
                <td class="text-center">Series 5</td>
                <td class="text-center">BMW serije 5 u perfketnom stanju. Auto sam licno uvezao iz Nemacke pocetkom 2021. godine od prvog vlasnika i od tada je u mom vlasnistvu i vodi se na mene.</td>
                <td class="text-center">55000</td>
                <td class="text-center"><button type="button" class="btn btn-color">Promena Cene</button><a href="auto.html?id=1" class="btn btn-secondary">Izmeni</a></td>            
              </tr> -->
            </tbody>
          </table>
        </div>
        <a href="novo-auto.html" class="btn btn-primary" style="width: 95%; margin: auto; margin-bottom: 10px;">Novo auto</a>
    </div>
</main>
<script src="auto.js"></script>
</body>
</html>
